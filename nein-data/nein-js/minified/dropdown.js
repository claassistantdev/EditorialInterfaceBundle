YUI.add("ez-dropdown",function(e){"use strict";function s(e){s.superclass.constructor.apply(this,arguments)}e.namespace("eZ");var t=e.Lang,n="updateTrigger",r="change",i="disabled";s.NAME="dropdown",s.CSS_PREFIX="ez-ei-"+s.NAME,s.ATTRS={options:{value:null},selected:{value:null},selectedValueNode:{value:null},trigger:{value:null},open:{value:!1,validator:t.isBoolean}},s.HTML_PARSER={options:[".ez-ei-dropdown-option"],selected:".ez-ei-dropdown-selected",selectedValueNode:".ez-ei-dropdown-selected-value",trigger:".ez-ei-dropdown-trigger",open:function(e){return e.hasClass(this.getClassName("open"))}},e.extend(s,e.Widget,{initializer:function(){this.publish(n,{broadcast:!1,emitFacade:!0,preventable:!0,defaultFn:e.bind(this._defaultUpdateSelection,this)}),this.publish(r,{broadcast:!1,emitFacade:!0,preventable:!1})},destructor:function(){},renderUI:function(){},bindUI:function(){var n=this.get("options");this.get("trigger").on("click",e.bind(this.toggle,this)),t.isObject(n)&&n.on("click",e.bind(this._onOptionClick,this)),this.get("srcNode").on("clickoutside",e.bind(this.close,this)),this.after("openChange",this._afterOpenChange),this.after("selectedChange",this._afterSelectedChange)},syncUI:function(){this._uiHandleOpen(),this._uiHandleSelected()},toggle:function(){this.set("open",!this.get("open"))},open:function(){this.set("open",!0)},close:function(){this.set("open",!1)},_isDisabled:function(e){return e.hasClass(this.getClassName(i))},_onOptionClick:function(e){this._isDisabled(e.target)||(this.set("selected",e.target),this.close())},_afterOpenChange:function(e){this._uiHandleOpen()},_afterSelectedChange:function(e){e.prevVal&&e.prevVal.removeClass(this.getClassName("selected")),e.newVal.addClass(this.getClassName("selected")),this.fire(r,{prevVal:e.prevVal,newVal:e.newVal}),this._uiHandleSelected()},_defaultUpdateSelection:function(e){var n=this.get("selectedValueNode"),r=this.get("selected");t.isObject(n)&&t.isObject(r)&&n.setContent(r.getAttribute("data-value"))},_uiHandleOpen:function(){this.get("open")?this.get("srcNode").addClass(this.getClassName("open")):this.get("srcNode").removeClass(this.getClassName("open"))},_uiHandleSelected:function(){this.fire(n)}}),e.eZ.Dropdown=s},"0.1alpha",["widget","event-outside"]);